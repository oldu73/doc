
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.0.3">
    
    
      
        <title>Docker - 06 - Data Persistence - Doc</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.62128196.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.9204c3b2.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>function __md_scope(e,t,_){return new URL(_||(t===localStorage?"../..":"../.."),location).pathname+"."+e}function __md_get(e,t=localStorage,_){return JSON.parse(t.getItem(__md_scope(e,t,_)))}function __md_set(e,t,_=localStorage,o){try{_.setItem(__md_scope(e,_,o),JSON.stringify(t))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#docker-06-data-persistence" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Doc" class="md-header__button md-logo" aria-label="Doc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Doc
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Docker - 06 - Data Persistence
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Doc" class="md-nav__button md-logo" aria-label="Doc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Doc
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Agile Methodology
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Agile Methodology" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Agile Methodology
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../agilemethodology/1-agilemethodology-misc/" class="md-nav__link">
        Agile Methodology - 01 - Misc
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          DevTools
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="DevTools" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          DevTools
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../devtools/1-devtools-misc/" class="md-nav__link">
        DevTools - 01 - Misc
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          Docker
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Docker" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Docker
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../1-docker-misc/" class="md-nav__link">
        Docker - 01 - Misc
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2-docker-basis/" class="md-nav__link">
        Docker - 02 - Basis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../3-docker-dockerfile/" class="md-nav__link">
        Docker - 03 - Docker File
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../4-docker-dockerhub/" class="md-nav__link">
        Docker - 04 - Docker Hub
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../5-docker-nodeserver/" class="md-nav__link">
        Docker - 05 - Node Server
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Docker - 06 - Data Persistence
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Docker - 06 - Data Persistence
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#volumes" class="md-nav__link">
    Volumes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bind-mount" class="md-nav__link">
    Bind mount
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tmpfs" class="md-nav__link">
    TMPFS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bind-mount_1" class="md-nav__link">
    Bind mount
  </a>
  
    <nav class="md-nav" aria-label="Bind mount">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#development-environment" class="md-nav__link">
    Development environment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#volumes_1" class="md-nav__link">
    Volumes
  </a>
  
    <nav class="md-nav" aria-label="Volumes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create" class="md-nav__link">
    Create
  </a>
  
    <nav class="md-nav" aria-label="Create">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-volume" class="md-nav__link">
    New volume
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#new-container-with-bind-volume" class="md-nav__link">
    New container with bind volume
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#share-backup-restore" class="md-nav__link">
    Share Backup Restore
  </a>
  
    <nav class="md-nav" aria-label="Share Backup Restore">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#share-volume-between-containers" class="md-nav__link">
    Share volume between containers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backup-volume" class="md-nav__link">
    Backup volume
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restore-volume" class="md-nav__link">
    Restore volume
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#volume-to-persist-a-database-mongo" class="md-nav__link">
    Volume to persist a database (mongo)
  </a>
  
    <nav class="md-nav" aria-label="Volume to persist a database (mongo)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#compass-gui-to-browse-mongo-db" class="md-nav__link">
    Compass GUI to browse mongo db
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tmpfs_1" class="md-nav__link">
    TMPFS
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../7-docker-network/" class="md-nav__link">
        Docker - 07 - Network
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../8-compose-use/" class="md-nav__link">
        Compose - 08 - Use
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../9-compose-dockerfile/" class="md-nav__link">
        Compose - 09 - Dockerfile
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../10-compose-services/" class="md-nav__link">
        Compose - 10 - Services
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../11-compose-production/" class="md-nav__link">
        Compose - 11 - Production
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          ElasticSearch
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="ElasticSearch" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          ElasticSearch
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../elasticsearch/elasticsearch/" class="md-nav__link">
        ElasticSearch - Misc
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Git
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Git" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Git
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../git/git/" class="md-nav__link">
        Git - Misc
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          IntelliJ
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="IntelliJ" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          IntelliJ
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../intellij/1-intellij-misc/" class="md-nav__link">
        IntelliJ - 01 - Misc
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../intellij/2-intellij-wsl/" class="md-nav__link">
        IntelliJ - 02 - WSL
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Java
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Java" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Java
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8_1" type="checkbox" id="__nav_8_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8_1">
          test
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="test" data-md-level="2">
        <label class="md-nav__title" for="__nav_8_1">
          <span class="md-nav__icon md-icon"></span>
          test
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../java/test/mock/" class="md-nav__link">
        mock
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          JavaScript
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="JavaScript" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          JavaScript
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/misc/" class="md-nav__link">
        misc
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_2" type="checkbox" id="__nav_9_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_2">
          training
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="training" data-md-level="2">
        <label class="md-nav__title" for="__nav_9_2">
          <span class="md-nav__icon md-icon"></span>
          training
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_2_1" type="checkbox" id="__nav_9_2_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_2_1">
          02-environment
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="02-environment" data-md-level="3">
        <label class="md-nav__title" for="__nav_9_2_1">
          <span class="md-nav__icon md-icon"></span>
          02-environment
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/02-environment/06-install-environnement/" class="md-nav__link">
        06-install-environnement
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/02-environment/08-install-babel/" class="md-nav__link">
        08-install-babel
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/02-environment/09-javascript-in-html/" class="md-nav__link">
        09-javascript-in-html
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/02-environment/10-webpack/" class="md-nav__link">
        10-webpack
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/02-environment/11-console/" class="md-nav__link">
        11-console
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_2_2" type="checkbox" id="__nav_9_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_2_2">
          03-basis
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="03-basis" data-md-level="3">
        <label class="md-nav__title" for="__nav_9_2_2">
          <span class="md-nav__icon md-icon"></span>
          03-basis
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/03-basis/12-intro-and-var/" class="md-nav__link">
        12-intro-and-var
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/03-basis/13-let-and-const/" class="md-nav__link">
        13-let-and-const
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/03-basis/14-hoisting/" class="md-nav__link">
        14-hoisting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/03-basis/15-type/" class="md-nav__link">
        15-type
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/03-basis/16-operator-1/" class="md-nav__link">
        16-operator-1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/03-basis/17-coercion/" class="md-nav__link">
        17-coercion
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/03-basis/18-operator-2/" class="md-nav__link">
        18-operator-2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/03-basis/19-value-and-reference/" class="md-nav__link">
        19-value-and-reference
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_2_3" type="checkbox" id="__nav_9_2_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_2_3">
          04-control
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="04-control" data-md-level="3">
        <label class="md-nav__title" for="__nav_9_2_3">
          <span class="md-nav__icon md-icon"></span>
          04-control
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/04-control/20-condition/" class="md-nav__link">
        20-condition
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/04-control/21-ternary-operator/" class="md-nav__link">
        21-ternary-operator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/04-control/22-switch/" class="md-nav__link">
        22-switch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/04-control/23-for/" class="md-nav__link">
        23-for
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/04-control/24-while/" class="md-nav__link">
        24-while
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_2_4" type="checkbox" id="__nav_9_2_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_2_4">
          05-number
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="05-number" data-md-level="3">
        <label class="md-nav__title" for="__nav_9_2_4">
          <span class="md-nav__icon md-icon"></span>
          05-number
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/05-number/25-introduction/" class="md-nav__link">
        25-introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/05-number/26-decimal/" class="md-nav__link">
        26-decimal
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/05-number/27-global-method/" class="md-nav__link">
        27-global-method
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/05-number/28-number-method/" class="md-nav__link">
        28-number-method
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/05-number/29-math-object/" class="md-nav__link">
        29-math-object
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_2_5" type="checkbox" id="__nav_9_2_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_2_5">
          06-string
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="06-string" data-md-level="3">
        <label class="md-nav__title" for="__nav_9_2_5">
          <span class="md-nav__icon md-icon"></span>
          06-string
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/06-string/30-introduction/" class="md-nav__link">
        30-introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/06-string/31-template-literal/" class="md-nav__link">
        31-template-literal
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/06-string/32-index-length/" class="md-nav__link">
        32-index-length
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/06-string/33-method/" class="md-nav__link">
        33-method
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10">
          JMeter
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="JMeter" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          JMeter
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../jmeter/1-jmeter-misc/" class="md-nav__link">
        JMeter - 01 - Misc
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11">
          Kafka
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Kafka" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          Kafka
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kafka/1-kafka-misc/" class="md-nav__link">
        Kafka - 01 - Misc
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_12" type="checkbox" id="__nav_12" >
      
      
      
      
        <label class="md-nav__link" for="__nav_12">
          Linux
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Linux" data-md-level="1">
        <label class="md-nav__title" for="__nav_12">
          <span class="md-nav__icon md-icon"></span>
          Linux
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/1-linux-misc/" class="md-nav__link">
        Linux - 01 - Misc
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13" type="checkbox" id="__nav_13" >
      
      
      
      
        <label class="md-nav__link" for="__nav_13">
          Microsoft
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Microsoft" data-md-level="1">
        <label class="md-nav__title" for="__nav_13">
          <span class="md-nav__icon md-icon"></span>
          Microsoft
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13_1" type="checkbox" id="__nav_13_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_13_1">
          Windows
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Windows" data-md-level="2">
        <label class="md-nav__title" for="__nav_13_1">
          <span class="md-nav__icon md-icon"></span>
          Windows
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../microsoft/windows/1-windows-misc/" class="md-nav__link">
        Windows - 01 - Misc
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13_2" type="checkbox" id="__nav_13_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_13_2">
          WSL
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="WSL" data-md-level="2">
        <label class="md-nav__title" for="__nav_13_2">
          <span class="md-nav__icon md-icon"></span>
          WSL
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../microsoft/wsl/1-wsl-misc/" class="md-nav__link">
        WSL - 01 - Misc
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14" type="checkbox" id="__nav_14" >
      
      
      
      
        <label class="md-nav__link" for="__nav_14">
          MkDocs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="MkDocs" data-md-level="1">
        <label class="md-nav__title" for="__nav_14">
          <span class="md-nav__icon md-icon"></span>
          MkDocs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mkdocs/mkdocs/" class="md-nav__link">
        MkDocs - Misc
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_15" type="checkbox" id="__nav_15" >
      
      
      
      
        <label class="md-nav__link" for="__nav_15">
          MongoDB
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="MongoDB" data-md-level="1">
        <label class="md-nav__title" for="__nav_15">
          <span class="md-nav__icon md-icon"></span>
          MongoDB
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mongodb/mongodb/" class="md-nav__link">
        MongoDB - Misc
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_16" type="checkbox" id="__nav_16" >
      
      
      
      
        <label class="md-nav__link" for="__nav_16">
          Redis
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Redis" data-md-level="1">
        <label class="md-nav__title" for="__nav_16">
          <span class="md-nav__icon md-icon"></span>
          Redis
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../redis/1-redis-misc/" class="md-nav__link">
        Redis - 01 - Misc
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_17" type="checkbox" id="__nav_17" >
      
      
      
      
        <label class="md-nav__link" for="__nav_17">
          VS Code
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="VS Code" data-md-level="1">
        <label class="md-nav__title" for="__nav_17">
          <span class="md-nav__icon md-icon"></span>
          VS Code
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vscode/vscode/" class="md-nav__link">
        VS Code - Misc
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
    <nav class="md-nav" aria-label="Introduction">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#volumes" class="md-nav__link">
    Volumes
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#bind-mount" class="md-nav__link">
    Bind mount
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#tmpfs" class="md-nav__link">
    TMPFS
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#bind-mount_1" class="md-nav__link">
    Bind mount
  </a>
  
    <nav class="md-nav" aria-label="Bind mount">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#development-environment" class="md-nav__link">
    Development environment
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#volumes_1" class="md-nav__link">
    Volumes
  </a>
  
    <nav class="md-nav" aria-label="Volumes">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#create" class="md-nav__link">
    Create
  </a>
  
    <nav class="md-nav" aria-label="Create">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new-volume" class="md-nav__link">
    New volume
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#new-container-with-bind-volume" class="md-nav__link">
    New container with bind volume
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#share-backup-restore" class="md-nav__link">
    Share Backup Restore
  </a>
  
    <nav class="md-nav" aria-label="Share Backup Restore">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#share-volume-between-containers" class="md-nav__link">
    Share volume between containers
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#backup-volume" class="md-nav__link">
    Backup volume
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#restore-volume" class="md-nav__link">
    Restore volume
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#volume-to-persist-a-database-mongo" class="md-nav__link">
    Volume to persist a database (mongo)
  </a>
  
    <nav class="md-nav" aria-label="Volume to persist a database (mongo)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#compass-gui-to-browse-mongo-db" class="md-nav__link">
    Compass GUI to browse mongo db
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#tmpfs_1" class="md-nav__link">
    TMPFS
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                

<h1 id="docker-06-data-persistence">Docker - 06 - Data Persistence</h1>
<hr />
<h2 id="introduction">Introduction</h2>
<p>Container =
- writable layer (this layer is deleted if the container no longer exists)
- image layer(s) (read)</p>
<p>Writable layers use UnionFS, slow read write performance, not adapted to host database.</p>
<p>To persist data, 3 possibilities:</p>
<h3 id="volumes">Volumes</h3>
<p>On Filesystem but managed by Docker, accessible through Docker CLI), mostly advised to use (in /var/lib/docker/volumes/ (not on WSL) but never access it directly.
Volumes are stored on but isolated from host machine.</p>
<p>Create a volume with Docker CLI command
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a>docker volume create
</code></pre></div></p>
<h3 id="bind-mount">Bind mount</h3>
<p>Manged by Filesystem and accessible from outside of Docker, not recommended.
Bind mounts are regular folder and files stored on host machine.</p>
<h3 id="tmpfs">TMPFS</h3>
<p>Temporary File System -&gt; RAM.
TMPFS are used to store temporary not persisted data, sensitive information like secret.</p>
<hr />
<h2 id="bind-mount_1">Bind mount</h2>
<p>Adapted for:
- Sharing configuration files between host and container.
- Development environment to share source code and alow live reload.</p>
<p>Recommend syntax
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a>docker run --mount type=bind,source=&lt;url&gt;,target=&lt;url&gt; image
</code></pre></div></p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a>$ mkdir data
<a id="__codelineno-2-2" name="__codelineno-2-2"></a>$ cd data
<a id="__codelineno-2-3" name="__codelineno-2-3"></a>$ touch hello.txt
<a id="__codelineno-2-4" name="__codelineno-2-4"></a>$ cd ..
<a id="__codelineno-2-5" name="__codelineno-2-5"></a>$ docker run --mount type=bind,source=&quot;$(pwd)&quot;/data,target=/data -it alpine sh
<a id="__codelineno-2-6" name="__codelineno-2-6"></a>$c ls
<a id="__codelineno-2-7" name="__codelineno-2-7"></a>.. data ..
<a id="__codelineno-2-8" name="__codelineno-2-8"></a>$c cd data
<a id="__codelineno-2-9" name="__codelineno-2-9"></a>$c ls
<a id="__codelineno-2-10" name="__codelineno-2-10"></a>hello.txt
</code></pre></div>
<p>Search for Mounts section with inspect CLI command to see mounting details:
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a>docker container inspect containerName
</code></pre></div></p>
<h3 id="development-environment">Development environment</h3>
<p>Set up of a development environnement for a node server application (c.f. <a href="../5-docker-nodeserver/#node-server-project">Node server project</a>).  </p>
<p>The goal here is to have changes available from host machine (IDE) in container and automatically reloaded by nodemon.</p>
<p>!!Warning!! A common mistake is to bind the root folder of a project.</p>
<p>E.g. in case of node context, if we do so, the node_modules folder created/populated in container image by "RUN npm install" instruction from Dockerfile will be erased. To avoid this unwanted behavior, it's mostly advised to move the source code files modified through IDE on host machine in a dedicated folder (e.g. src).</p>
<p>On host machine:
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a>$ mkdir node-server
<a id="__codelineno-4-2" name="__codelineno-4-2"></a>$ cd node-server
<a id="__codelineno-4-3" name="__codelineno-4-3"></a>$ mkdir src
<a id="__codelineno-4-4" name="__codelineno-4-4"></a>$ cd src
<a id="__codelineno-4-5" name="__codelineno-4-5"></a>$ touch app.js
<a id="__codelineno-4-6" name="__codelineno-4-6"></a>$ cd ..
</code></pre></div></p>
<p>src/app.js:
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a>const express = require(&#39;express&#39;);
<a id="__codelineno-5-2" name="__codelineno-5-2"></a>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a>const app = express();
<a id="__codelineno-5-4" name="__codelineno-5-4"></a>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a>app.get(&#39;*&#39;, (req, res) =&gt; {
<a id="__codelineno-5-6" name="__codelineno-5-6"></a>    res.status(200).json(&#39;Hello, world!&#39;);
<a id="__codelineno-5-7" name="__codelineno-5-7"></a>})
<a id="__codelineno-5-8" name="__codelineno-5-8"></a>
<a id="__codelineno-5-9" name="__codelineno-5-9"></a>app.listen(80);
</code></pre></div></p>
<p>Dockerfile (in root folder, "node-server"):
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a>FROM node:alpine
<a id="__codelineno-6-2" name="__codelineno-6-2"></a>WORKDIR /app
<a id="__codelineno-6-3" name="__codelineno-6-3"></a>COPY ./package.json .
<a id="__codelineno-6-4" name="__codelineno-6-4"></a>RUN npm install
<a id="__codelineno-6-5" name="__codelineno-6-5"></a>COPY . .
<a id="__codelineno-6-6" name="__codelineno-6-6"></a>ENV PATH=$PATH:/app/node_modules/.bin
<a id="__codelineno-6-7" name="__codelineno-6-7"></a>CMD [&quot;nodemon&quot;, &quot;-L&quot;, &quot;src/app.js&quot;]
</code></pre></div></p>
<p>!! Warning !! In above Dockerfile we use <strong>-L</strong> option for --legacy-watch because in some containerized environnement, application may not restart automatically after file's change.</p>
<p>Build image:
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a>$ docker build -t myapp .
</code></pre></div></p>
<p>Start a container with new image version:
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a>$ docker run --rm -p 80:80 --mount type=bind,source=&quot;$(pwd)/src&quot;,target=/app/src myapp
</code></pre></div></p>
<p>Now try to edit 'src/app.js' file on host machine to observe nodemon restart in terminal.<br />
You may also observe the changes on your browser at 'localhost' address, after refresh.</p>
<hr />
<h2 id="volumes_1">Volumes</h2>
<p>docker volume
- create
- inspect
- ls
- rm
- prune</p>
<p>old syntax (not advised, c.f. bind)
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a>docker run -v &lt;volume-name&gt;:&lt;container-url&gt; image
</code></pre></div></p>
<p>new syntax
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a>docker run --mount type=volume,source=&lt;volume-name&gt;,target=&lt;url&gt; image
</code></pre></div></p>
<h3 id="create">Create</h3>
<h4 id="new-volume">New volume</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a>$ docker volume create mydata
<a id="__codelineno-11-2" name="__codelineno-11-2"></a>mydata
<a id="__codelineno-11-3" name="__codelineno-11-3"></a>
<a id="__codelineno-11-4" name="__codelineno-11-4"></a>$ docker volume ls
<a id="__codelineno-11-5" name="__codelineno-11-5"></a>DRIVER    VOLUME NAME
<a id="__codelineno-11-6" name="__codelineno-11-6"></a>local     mydata
<a id="__codelineno-11-7" name="__codelineno-11-7"></a>
<a id="__codelineno-11-8" name="__codelineno-11-8"></a>$ docker volume inspect mydata
<a id="__codelineno-11-9" name="__codelineno-11-9"></a>[
<a id="__codelineno-11-10" name="__codelineno-11-10"></a>    {
<a id="__codelineno-11-11" name="__codelineno-11-11"></a>        &quot;CreatedAt&quot;: &quot;2021-12-24T06:15:34Z&quot;,
<a id="__codelineno-11-12" name="__codelineno-11-12"></a>        &quot;Driver&quot;: &quot;local&quot;,
<a id="__codelineno-11-13" name="__codelineno-11-13"></a>        &quot;Labels&quot;: {},
<a id="__codelineno-11-14" name="__codelineno-11-14"></a>        &quot;Mountpoint&quot;: &quot;/var/lib/docker/volumes/mydata/_data&quot;,
<a id="__codelineno-11-15" name="__codelineno-11-15"></a>        &quot;Name&quot;: &quot;mydata&quot;,
<a id="__codelineno-11-16" name="__codelineno-11-16"></a>        &quot;Options&quot;: {},
<a id="__codelineno-11-17" name="__codelineno-11-17"></a>        &quot;Scope&quot;: &quot;local&quot;
<a id="__codelineno-11-18" name="__codelineno-11-18"></a>    }
<a id="__codelineno-11-19" name="__codelineno-11-19"></a>]
</code></pre></div>
<p>WSL2 volumes are not in /var/lib/docker/volumes/mydata/_data</p>
<p>You can find WSL2 volumes under a hidden network share. Open Windows Explorer, and type <strong>\\wsl$</strong> into the location bar. Hit enter, and it should display your WSL volumes, including the ones for Docker for Windows.</p>
<p>WSL2 volumes, in Windows Explorer bar
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a>\\wsl$\docker-desktop-data\version-pack-data\community\docker\volumes
</code></pre></div></p>
<h4 id="new-container-with-bind-volume">New container with bind volume</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="gp">$ </span>docker run --mount <span class="nv">type</span><span class="o">=</span>volume,source<span class="o">=</span>mydata,target<span class="o">=</span>/data -it alpine sh
<a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="gp">$</span>c <span class="nb">cd</span> data
<a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="gp">$</span>c touch hello.txt
<a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="gp">$</span>c <span class="nb">echo</span> <span class="m">123</span> &gt; hello.txt
<a id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="go">ctrl+d</span>
<a id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="gp">$ </span>docker rm containername
<a id="__codelineno-13-7" name="__codelineno-13-7"></a><span class="gp">$ </span>docker run --mount <span class="nv">type</span><span class="o">=</span>volume,source<span class="o">=</span>mydata,target<span class="o">=</span>/data -it alpine sh
<a id="__codelineno-13-8" name="__codelineno-13-8"></a><span class="gp">$</span>c <span class="nb">cd</span> data
<a id="__codelineno-13-9" name="__codelineno-13-9"></a><span class="gp">$</span>c cat hello.txt
<a id="__codelineno-13-10" name="__codelineno-13-10"></a><span class="go">123</span>
</code></pre></div>
<h3 id="share-backup-restore">Share Backup Restore</h3>
<h4 id="share-volume-between-containers">Share volume between containers</h4>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="gp">$ </span>docker run --mount <span class="nv">type</span><span class="o">=</span>volume,source<span class="o">=</span>mydata,target<span class="o">=</span>/data --name firstcont -it alpine sh
<a id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="gp">$</span>c1 <span class="nb">cd</span> data
<a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="go">In another terminal</span>
<a id="__codelineno-14-4" name="__codelineno-14-4"></a><span class="gp">$ </span>docker run --mount <span class="nv">type</span><span class="o">=</span>volume,source<span class="o">=</span>mydata,target<span class="o">=</span>/data --name secondcont -it alpine sh
<a id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="gp">$</span>c2 <span class="nb">cd</span> data
<a id="__codelineno-14-6" name="__codelineno-14-6"></a><span class="gp">$</span>c2 touch new.txt
<a id="__codelineno-14-7" name="__codelineno-14-7"></a><span class="gp">$</span>c1 ls
<a id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="go">hello.txt  new.txt</span>
</code></pre></div>
<p>Another way is volume from container
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="gp">$ </span>docker run --volumes-from firstcont --name thirdcont -it alpine sh
</code></pre></div></p>
<h4 id="backup-volume">Backup volume</h4>
<p>Compress a volume to a bind folder with tar
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="gp">$ </span>mkdir backup
<a id="__codelineno-16-2" name="__codelineno-16-2"></a><span class="gp">$ </span>docker run --mount <span class="nv">type</span><span class="o">=</span>volume,source<span class="o">=</span>mydata,target<span class="o">=</span>/data --mount <span class="nv">type</span><span class="o">=</span>bind,source<span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span><span class="s2">&quot;</span>/backup,target<span class="o">=</span>/backup alpine tar -czf /backup/mydata.tar.gz /data
</code></pre></div></p>
<h4 id="restore-volume">Restore volume</h4>
<p>Extract an archive from a bind folder to a volume
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="gp">$ </span>docker volume create restore
<a id="__codelineno-17-2" name="__codelineno-17-2"></a>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="gp">$ </span>docker run --mount <span class="nv">type</span><span class="o">=</span>volume,source<span class="o">=</span>restore,target<span class="o">=</span>/data --mount <span class="nv">type</span><span class="o">=</span>bind,source<span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span><span class="s2">&quot;</span>/backup,target<span class="o">=</span>/backup alpine tar -xf /backup/mydata.tar.gz -C /data
</code></pre></div></p>
<p>To not have a folder data in a folder data, use tar with option --strip-components 1
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="gp">$ </span>docker run --mount <span class="nv">type</span><span class="o">=</span>volume,source<span class="o">=</span>restore,target<span class="o">=</span>/data --mount <span class="nv">type</span><span class="o">=</span>bind,source<span class="o">=</span><span class="s2">&quot;</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span><span class="s2">&quot;</span>,target<span class="o">=</span>/backup -it alpine tar -xf /backup/backup.tar --strip-components <span class="m">1</span> -C /data
</code></pre></div></p>
<p>Check volume correctly restored
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="gp">$ </span>docker container run -it --rm --mount <span class="nv">source</span><span class="o">=</span>restore,target<span class="o">=</span>/data alpine sh
</code></pre></div></p>
<h3 id="volume-to-persist-a-database-mongo">Volume to persist a database (mongo)</h3>
<p>For mongo db it consist of mounting a volume with folder /data/db in mongo container
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="gp">$ </span>docker volume create mydb
<a id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="gp">$ </span>docker run --mount <span class="nv">type</span><span class="o">=</span>volume,source<span class="o">=</span>mydb,target<span class="o">=</span>/data/db -d --name mongocontainer1 mongo
<a id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="gp">$ </span>docker <span class="nb">exec</span> -it mongocontainer1 sh
<a id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="gp">$</span>c mongo
<a id="__codelineno-20-5" name="__codelineno-20-5"></a><span class="go">&gt; use test</span>
<a id="__codelineno-20-6" name="__codelineno-20-6"></a><span class="go">switched to db test</span>
<a id="__codelineno-20-7" name="__codelineno-20-7"></a><span class="go">&gt; db.user.insertOne({ name: &#39;jean&#39; })</span>
<a id="__codelineno-20-8" name="__codelineno-20-8"></a><span class="go">{</span>
<a id="__codelineno-20-9" name="__codelineno-20-9"></a><span class="go">        &quot;acknowledged&quot; : true,</span>
<a id="__codelineno-20-10" name="__codelineno-20-10"></a><span class="go">        &quot;insertedId&quot; : ObjectId(&quot;61caeae2df845609f1835264&quot;)</span>
<a id="__codelineno-20-11" name="__codelineno-20-11"></a><span class="go">}</span>
<a id="__codelineno-20-12" name="__codelineno-20-12"></a><span class="go">&gt; db.user.findOne()</span>
<a id="__codelineno-20-13" name="__codelineno-20-13"></a><span class="go">{ &quot;_id&quot; : ObjectId(&quot;61caeae2df845609f1835264&quot;), &quot;name&quot; : &quot;jean&quot; }</span>
<a id="__codelineno-20-14" name="__codelineno-20-14"></a><span class="go">&gt; exit</span>
<a id="__codelineno-20-15" name="__codelineno-20-15"></a><span class="go">bye</span>
<a id="__codelineno-20-16" name="__codelineno-20-16"></a><span class="gp">$</span>c <span class="nb">exit</span>
<a id="__codelineno-20-17" name="__codelineno-20-17"></a><span class="gp">$ </span>docker container stop mongocontainer1
<a id="__codelineno-20-18" name="__codelineno-20-18"></a><span class="gp">$ </span>docker container rm mongocontainer1
</code></pre></div></p>
<p>Container is removed but database is persisted in a volume.
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="gp">$ </span>docker run --mount <span class="nv">type</span><span class="o">=</span>volume,source<span class="o">=</span>mydb,target<span class="o">=</span>/data/db -d --name mongocontainer2 mongo
<a id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="gp">$ </span>docker <span class="nb">exec</span> -it mongocontainer1 sh
<a id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="gp">$</span>c mongo
<a id="__codelineno-21-4" name="__codelineno-21-4"></a><span class="go">&gt; use test</span>
<a id="__codelineno-21-5" name="__codelineno-21-5"></a><span class="go">switched to db test</span>
<a id="__codelineno-21-6" name="__codelineno-21-6"></a><span class="go">&gt; db.user.findOne()</span>
<a id="__codelineno-21-7" name="__codelineno-21-7"></a><span class="go">{ &quot;_id&quot; : ObjectId(&quot;61caeae2df845609f1835264&quot;), &quot;name&quot; : &quot;jean&quot; }</span>
</code></pre></div></p>
<h4 id="compass-gui-to-browse-mongo-db">Compass GUI to browse mongo db</h4>
<p>Should run container with opened port (default 27017).<br />
If port is already used on host machine, you may use 27018 for example</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="gp">$ </span>docker run -p <span class="m">27018</span>:27017 --mount <span class="nv">type</span><span class="o">=</span>volume,source<span class="o">=</span>mydb,target<span class="o">=</span>/data/db -d --name mongocontainer3 mongo
</code></pre></div>
<p>Enter in connection field:<br />
mongodb://localhost:27018</p>
<hr />
<h2 id="tmpfs_1">TMPFS</h2>
<p>Rarely used, uniquely to keep data in RAM, e.g. secret or status data, works only on Linux system.
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="gp">$ </span>docker run --mount <span class="nv">type</span><span class="o">=</span>tmpfs,target<span class="o">=</span>/data -it alpine sh
<a id="__codelineno-23-2" name="__codelineno-23-2"></a><span class="gp">$</span>c <span class="nb">cd</span> data
<a id="__codelineno-23-3" name="__codelineno-23-3"></a><span class="gp">$</span>c touch secret.txt
<a id="__codelineno-23-4" name="__codelineno-23-4"></a><span class="gp">$</span>c ls
<a id="__codelineno-23-5" name="__codelineno-23-5"></a><span class="go">secret.txt</span>
<a id="__codelineno-23-6" name="__codelineno-23-6"></a><span class="gp">$</span>c <span class="nb">exit</span>
<a id="__codelineno-23-7" name="__codelineno-23-7"></a><span class="gp">$ </span>docker ps -a
<a id="__codelineno-23-8" name="__codelineno-23-8"></a><span class="go">CONTAINER ID   IMAGE     COMMAND   CREATED         STATUS                     PORTS     NAMES</span>
<a id="__codelineno-23-9" name="__codelineno-23-9"></a><span class="go">58f104d6a051   alpine    &quot;sh&quot;      2 minutes ago   Exited (0) 5 seconds ago             musing_wilbur</span>
</code></pre></div></p>
<p>With 'TMPFS' if container is in an 'Exited' status, data aren't persisted.<br />
Relaunch container to observe that data aren't available anymore.
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="gp">$ </span>docker start -ai musing_wilbur
<a id="__codelineno-24-2" name="__codelineno-24-2"></a><span class="gp">$</span>c <span class="nb">cd</span> data
<a id="__codelineno-24-3" name="__codelineno-24-3"></a><span class="gp">$</span>c ls
<a id="__codelineno-24-4" name="__codelineno-24-4"></a><span class="gp gp-VirtualEnv">(empty)</span>
</code></pre></div></p>
<hr />

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../5-docker-nodeserver/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Docker - 05 - Node Server" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Docker - 05 - Node Server
            </div>
          </div>
        </a>
      
      
        
        <a href="../7-docker-network/" class="md-footer__link md-footer__link--next" aria-label="Next: Docker - 07 - Network" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Docker - 07 - Network
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.annotate"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.01824240.min.js"}</script>
    
    
      <script src="../../assets/javascripts/bundle.e0abf5b0.min.js"></script>
      
    
  </body>
</html>