
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.2.3, mkdocs-material-8.0.3">
    
    
      
        <title>Compose - 09 - Dockerfile - Doc</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.62128196.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.9204c3b2.min.css">
        
      
    
    
    
      
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>function __md_scope(e,t,_){return new URL(_||(t===localStorage?"../..":"../.."),location).pathname+"."+e}function __md_get(e,t=localStorage,_){return JSON.parse(t.getItem(__md_scope(e,t,_)))}function __md_set(e,t,_=localStorage,o){try{_.setItem(__md_scope(e,_,o),JSON.stringify(t))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="none" data-md-color-accent="none">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#compose-09-dockerfile" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="Doc" class="md-header__button md-logo" aria-label="Doc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Doc
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Compose - 09 - Dockerfile
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Doc" class="md-nav__button md-logo" aria-label="Doc" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54z"/></svg>

    </a>
    Doc
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_2">
          Agile Methodology
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Agile Methodology" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Agile Methodology
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../agilemethodology/1-agilemethodology-misc/" class="md-nav__link">
        Agile Methodology - 01 - Misc
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" checked>
      
      
      
      
        <label class="md-nav__link" for="__nav_3">
          Docker
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Docker" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Docker
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../1-docker-misc/" class="md-nav__link">
        Docker - 01 - Misc
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../2-docker-basis/" class="md-nav__link">
        Docker - 02 - Basis
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../3-docker-dockerfile/" class="md-nav__link">
        Docker - 03 - Docker File
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../4-docker-dockerhub/" class="md-nav__link">
        Docker - 04 - Docker Hub
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../5-docker-nodeserver/" class="md-nav__link">
        Docker - 05 - Node Server
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../6-docker-datapersistence/" class="md-nav__link">
        Docker - 06 - Data Persistence
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../7-docker-network/" class="md-nav__link">
        Docker - 07 - Network
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../8-compose-use/" class="md-nav__link">
        Compose - 08 - Use
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Compose - 09 - Dockerfile
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Compose - 09 - Dockerfile
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#setup-of-client-application-project" class="md-nav__link">
    Setup of client application project
  </a>
  
    <nav class="md-nav" aria-label="Setup of client application project">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#node" class="md-nav__link">
    Node
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#react" class="md-nav__link">
    React
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dockerized" class="md-nav__link">
    Dockerized
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#live-reload" class="md-nav__link">
    Live reload
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#set-up-docker-compose" class="md-nav__link">
    Set up Docker Compose
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-during-developpement" class="md-nav__link">
    Test during developpement
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#production-environnement" class="md-nav__link">
    Production environnement
  </a>
  
    <nav class="md-nav" aria-label="Production environnement">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multi-stage-dockerfile" class="md-nav__link">
    Multi stage Dockerfile
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-compose" class="md-nav__link">
    Docker Compose
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../10-compose-services/" class="md-nav__link">
        Compose - 10 - Services
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../11-compose-production/" class="md-nav__link">
        Compose - 11 - Production
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4">
          ELK
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="ELK" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          ELK
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_1" type="checkbox" id="__nav_4_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_1">
          ElasticSearch
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="ElasticSearch" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_1">
          <span class="md-nav__icon md-icon"></span>
          ElasticSearch
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../elk/elasticsearch/elasticsearch/" class="md-nav__link">
        ElasticSearch - Misc
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4_2" type="checkbox" id="__nav_4_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_4_2">
          Kibana
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Kibana" data-md-level="2">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          Kibana
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../elk/kibana/kibana/" class="md-nav__link">
        Kibana - Misc
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_5">
          Git
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Git" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Git
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../git/misc/" class="md-nav__link">
        misc
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6">
          Google
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Google" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Google
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6_1" type="checkbox" id="__nav_6_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_6_1">
          Chrome
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Chrome" data-md-level="2">
        <label class="md-nav__title" for="__nav_6_1">
          <span class="md-nav__icon md-icon"></span>
          Chrome
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../google/chrome/0-misc/" class="md-nav__link">
        0-misc
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../google/chrome/1-devtool/" class="md-nav__link">
        1-devtool
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../google/chrome/2-shortcut/" class="md-nav__link">
        2-shortcut
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_7">
          IntelliJ
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="IntelliJ" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          IntelliJ
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../intellij/1-intellij-misc/" class="md-nav__link">
        IntelliJ - 01 - Misc
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../intellij/2-intellij-wsl/" class="md-nav__link">
        IntelliJ - 02 - WSL
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8">
          Java
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Java" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Java
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8_1" type="checkbox" id="__nav_8_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_8_1">
          test
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="test" data-md-level="2">
        <label class="md-nav__title" for="__nav_8_1">
          <span class="md-nav__icon md-icon"></span>
          test
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../java/test/mock/" class="md-nav__link">
        mock
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9">
          JavaScript
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="JavaScript" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          JavaScript
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/misc/" class="md-nav__link">
        misc
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_2" type="checkbox" id="__nav_9_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_2">
          training
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="training" data-md-level="2">
        <label class="md-nav__title" for="__nav_9_2">
          <span class="md-nav__icon md-icon"></span>
          training
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_2_1" type="checkbox" id="__nav_9_2_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_2_1">
          02-environment
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="02-environment" data-md-level="3">
        <label class="md-nav__title" for="__nav_9_2_1">
          <span class="md-nav__icon md-icon"></span>
          02-environment
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/02-environment/06-install-environnement/" class="md-nav__link">
        06-install-environnement
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/02-environment/08-install-babel/" class="md-nav__link">
        08-install-babel
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/02-environment/09-javascript-in-html/" class="md-nav__link">
        09-javascript-in-html
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/02-environment/10-webpack/" class="md-nav__link">
        10-webpack
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/02-environment/11-console/" class="md-nav__link">
        11-console
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_2_2" type="checkbox" id="__nav_9_2_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_2_2">
          03-basis
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="03-basis" data-md-level="3">
        <label class="md-nav__title" for="__nav_9_2_2">
          <span class="md-nav__icon md-icon"></span>
          03-basis
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/03-basis/12-intro-and-var/" class="md-nav__link">
        12-intro-and-var
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/03-basis/13-let-and-const/" class="md-nav__link">
        13-let-and-const
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/03-basis/14-hoisting/" class="md-nav__link">
        14-hoisting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/03-basis/15-type/" class="md-nav__link">
        15-type
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/03-basis/16-operator-1/" class="md-nav__link">
        16-operator-1
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/03-basis/17-coercion/" class="md-nav__link">
        17-coercion
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/03-basis/18-operator-2/" class="md-nav__link">
        18-operator-2
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/03-basis/19-value-and-reference/" class="md-nav__link">
        19-value-and-reference
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_2_3" type="checkbox" id="__nav_9_2_3" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_2_3">
          04-control
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="04-control" data-md-level="3">
        <label class="md-nav__title" for="__nav_9_2_3">
          <span class="md-nav__icon md-icon"></span>
          04-control
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/04-control/20-condition/" class="md-nav__link">
        20-condition
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/04-control/21-ternary-operator/" class="md-nav__link">
        21-ternary-operator
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/04-control/22-switch/" class="md-nav__link">
        22-switch
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/04-control/23-for/" class="md-nav__link">
        23-for
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/04-control/24-while/" class="md-nav__link">
        24-while
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_2_4" type="checkbox" id="__nav_9_2_4" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_2_4">
          05-number
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="05-number" data-md-level="3">
        <label class="md-nav__title" for="__nav_9_2_4">
          <span class="md-nav__icon md-icon"></span>
          05-number
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/05-number/25-introduction/" class="md-nav__link">
        25-introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/05-number/26-decimal/" class="md-nav__link">
        26-decimal
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/05-number/27-global-method/" class="md-nav__link">
        27-global-method
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/05-number/28-number-method/" class="md-nav__link">
        28-number-method
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/05-number/29-math-object/" class="md-nav__link">
        29-math-object
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_2_5" type="checkbox" id="__nav_9_2_5" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_2_5">
          06-string
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="06-string" data-md-level="3">
        <label class="md-nav__title" for="__nav_9_2_5">
          <span class="md-nav__icon md-icon"></span>
          06-string
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/06-string/30-introduction/" class="md-nav__link">
        30-introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/06-string/31-template-literal/" class="md-nav__link">
        31-template-literal
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/06-string/32-index-length/" class="md-nav__link">
        32-index-length
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/06-string/33-method/" class="md-nav__link">
        33-method
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/06-string/34-regex/" class="md-nav__link">
        34-regex
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_2_6" type="checkbox" id="__nav_9_2_6" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_2_6">
          07-object
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="07-object" data-md-level="3">
        <label class="md-nav__title" for="__nav_9_2_6">
          <span class="md-nav__icon md-icon"></span>
          07-object
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/07-object/35-introduction/" class="md-nav__link">
        35-introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/07-object/36-property/" class="md-nav__link">
        36-property
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/07-object/37-syntax-shortcut/" class="md-nav__link">
        37-syntax-shortcut
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/07-object/38-decomposition/" class="md-nav__link">
        38-decomposition
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/07-object/39-test-existence/" class="md-nav__link">
        39-test-existence
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/07-object/40-discard-property/" class="md-nav__link">
        40-discard-property
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/07-object/41-merge/" class="md-nav__link">
        41-merge
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/07-object/42-compare/" class="md-nav__link">
        42-compare
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/07-object/43-iterate/" class="md-nav__link">
        43-iterate
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/07-object/44-json/" class="md-nav__link">
        44-json
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/07-object/45-copy/" class="md-nav__link">
        45-copy
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_2_7" type="checkbox" id="__nav_9_2_7" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_2_7">
          08-function
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="08-function" data-md-level="3">
        <label class="md-nav__title" for="__nav_9_2_7">
          <span class="md-nav__icon md-icon"></span>
          08-function
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/08-function/46-expression/" class="md-nav__link">
        46-expression
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_2_8" type="checkbox" id="__nav_9_2_8" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_2_8">
          11-dom
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="11-dom" data-md-level="3">
        <label class="md-nav__title" for="__nav_9_2_8">
          <span class="md-nav__icon md-icon"></span>
          11-dom
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/11-dom/81-css-with-webpack/" class="md-nav__link">
        81-css-with-webpack
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_2_9" type="checkbox" id="__nav_9_2_9" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_2_9">
          13-project-todo
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="13-project-todo" data-md-level="3">
        <label class="md-nav__title" for="__nav_9_2_9">
          <span class="md-nav__icon md-icon"></span>
          13-project-todo
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/13-project-todo/92-initialization/" class="md-nav__link">
        92-initialization
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_2_10" type="checkbox" id="__nav_9_2_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_2_10">
          14-asynchronous-browser
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="14-asynchronous-browser" data-md-level="3">
        <label class="md-nav__title" for="__nav_9_2_10">
          <span class="md-nav__icon md-icon"></span>
          14-asynchronous-browser
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/14-asynchronous-browser/102-polyfill-webpack/" class="md-nav__link">
        102-polyfill-webpack
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_2_11" type="checkbox" id="__nav_9_2_11" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_2_11">
          16-project-blog
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="16-project-blog" data-md-level="3">
        <label class="md-nav__title" for="__nav_9_2_11">
          <span class="md-nav__icon md-icon"></span>
          16-project-blog
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/16-project-blog/115-introduction/" class="md-nav__link">
        115-introduction
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/16-project-blog/116-multipages-webpack/" class="md-nav__link">
        116-multipages-webpack
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/16-project-blog/117-assets-webpack/" class="md-nav__link">
        117-assets-webpack
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/16-project-blog/118-styles-setup/" class="md-nav__link">
        118-styles-setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/16-project-blog/119-layout-setup/" class="md-nav__link">
        119-layout-setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/16-project-blog/120-header-footer-setup/" class="md-nav__link">
        120-header-footer-setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/16-project-blog/121-form-create-article/" class="md-nav__link">
        121-form-create-article
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/16-project-blog/122-form-javascript/" class="md-nav__link">
        122-form-javascript
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/16-project-blog/123-send-article/" class="md-nav__link">
        123-send-article
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/16-project-blog/124-articles-list/" class="md-nav__link">
        124-articles-list
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/16-project-blog/125-articles-list-display/" class="md-nav__link">
        125-articles-list-display
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/16-project-blog/126-delete-article/" class="md-nav__link">
        126-delete-article
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/16-project-blog/127-responsive-project/" class="md-nav__link">
        127-responsive-project
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/16-project-blog/aws-01-setup/" class="md-nav__link">
        aws-01-setup
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/16-project-blog/aws-02-create-item/" class="md-nav__link">
        aws-02-create-item
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/16-project-blog/aws-03-list-item/" class="md-nav__link">
        aws-03-list-item
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/16-project-blog/aws-04-delete-item/" class="md-nav__link">
        aws-04-delete-item
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/16-project-blog/debug/" class="md-nav__link">
        debug
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/16-project-blog/git-branch/" class="md-nav__link">
        git-branch
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9_2_12" type="checkbox" id="__nav_9_2_12" >
      
      
      
      
        <label class="md-nav__link" for="__nav_9_2_12">
          19-project-blog-p2
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="19-project-blog-p2" data-md-level="3">
        <label class="md-nav__title" for="__nav_9_2_12">
          <span class="md-nav__icon md-icon"></span>
          19-project-blog-p2
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../javascript/training/19-project-blog-p2/137-introduction/" class="md-nav__link">
        137-introduction
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      
      
      
        <label class="md-nav__link" for="__nav_10">
          JMeter
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="JMeter" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          JMeter
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../jmeter/1-jmeter-misc/" class="md-nav__link">
        JMeter - 01 - Misc
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_11" type="checkbox" id="__nav_11" >
      
      
      
      
        <label class="md-nav__link" for="__nav_11">
          Kafka
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Kafka" data-md-level="1">
        <label class="md-nav__title" for="__nav_11">
          <span class="md-nav__icon md-icon"></span>
          Kafka
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../kafka/1-kafka-misc/" class="md-nav__link">
        Kafka - 01 - Misc
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_12" type="checkbox" id="__nav_12" >
      
      
      
      
        <label class="md-nav__link" for="__nav_12">
          Linux
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Linux" data-md-level="1">
        <label class="md-nav__title" for="__nav_12">
          <span class="md-nav__icon md-icon"></span>
          Linux
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/0-linux-debug/" class="md-nav__link">
        Linux - 00 - Debug
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/1-linux-misc/" class="md-nav__link">
        Linux - 01 - Misc
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../linux/2-linux-network/" class="md-nav__link">
        Linux - 02 - Network
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13" type="checkbox" id="__nav_13" >
      
      
      
      
        <label class="md-nav__link" for="__nav_13">
          Microsoft
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Microsoft" data-md-level="1">
        <label class="md-nav__title" for="__nav_13">
          <span class="md-nav__icon md-icon"></span>
          Microsoft
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13_1" type="checkbox" id="__nav_13_1" >
      
      
      
      
        <label class="md-nav__link" for="__nav_13_1">
          Windows
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Windows" data-md-level="2">
        <label class="md-nav__title" for="__nav_13_1">
          <span class="md-nav__icon md-icon"></span>
          Windows
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../microsoft/windows/1-windows-misc/" class="md-nav__link">
        Windows - 01 - Misc
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_13_2" type="checkbox" id="__nav_13_2" >
      
      
      
      
        <label class="md-nav__link" for="__nav_13_2">
          WSL
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="WSL" data-md-level="2">
        <label class="md-nav__title" for="__nav_13_2">
          <span class="md-nav__icon md-icon"></span>
          WSL
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../microsoft/wsl/1-wsl-misc/" class="md-nav__link">
        WSL - 01 - Misc
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_14" type="checkbox" id="__nav_14" >
      
      
      
      
        <label class="md-nav__link" for="__nav_14">
          MkDocs
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="MkDocs" data-md-level="1">
        <label class="md-nav__title" for="__nav_14">
          <span class="md-nav__icon md-icon"></span>
          MkDocs
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mkdocs/misc/" class="md-nav__link">
        misc
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_15" type="checkbox" id="__nav_15" >
      
      
      
      
        <label class="md-nav__link" for="__nav_15">
          MongoDB
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="MongoDB" data-md-level="1">
        <label class="md-nav__title" for="__nav_15">
          <span class="md-nav__icon md-icon"></span>
          MongoDB
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../mongodb/mongodb/" class="md-nav__link">
        MongoDB - Misc
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_16" type="checkbox" id="__nav_16" >
      
      
      
      
        <label class="md-nav__link" for="__nav_16">
          OKR
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="OKR" data-md-level="1">
        <label class="md-nav__title" for="__nav_16">
          <span class="md-nav__icon md-icon"></span>
          OKR
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../okrmethodology/redaction/" class="md-nav__link">
        OKR - Rdaction
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_17" type="checkbox" id="__nav_17" >
      
      
      
      
        <label class="md-nav__link" for="__nav_17">
          Redis
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Redis" data-md-level="1">
        <label class="md-nav__title" for="__nav_17">
          <span class="md-nav__icon md-icon"></span>
          Redis
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../redis/1-redis-misc/" class="md-nav__link">
        Redis - 01 - Misc
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_18" type="checkbox" id="__nav_18" >
      
      
      
      
        <label class="md-nav__link" for="__nav_18">
          VS Code
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="VS Code" data-md-level="1">
        <label class="md-nav__title" for="__nav_18">
          <span class="md-nav__icon md-icon"></span>
          VS Code
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../vscode/vscode/" class="md-nav__link">
        VS Code - Misc
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#setup-of-client-application-project" class="md-nav__link">
    Setup of client application project
  </a>
  
    <nav class="md-nav" aria-label="Setup of client application project">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#node" class="md-nav__link">
    Node
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#react" class="md-nav__link">
    React
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dockerized" class="md-nav__link">
    Dockerized
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#live-reload" class="md-nav__link">
    Live reload
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#set-up-docker-compose" class="md-nav__link">
    Set up Docker Compose
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#test-during-developpement" class="md-nav__link">
    Test during developpement
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#production-environnement" class="md-nav__link">
    Production environnement
  </a>
  
    <nav class="md-nav" aria-label="Production environnement">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#introduction" class="md-nav__link">
    Introduction
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#multi-stage-dockerfile" class="md-nav__link">
    Multi stage Dockerfile
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#docker-compose" class="md-nav__link">
    Docker Compose
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                

<h1 id="compose-09-dockerfile">Compose - 09 - Dockerfile</h1>
<p>Docker Compose - Dockerfile</p>
<p>!WSL2, advised to not use a mounted volume like '/mnt/c/' for handling a project to avoid slowness and live reload issues.
Instead, prefer usage of a "native" WSL2 folder like for e.g. '/home/user/react-nginx'</p>
<p>Dockerfile and Docker Compose to set up a client application composed of:  </p>
<ul>
<li>React  </li>
<li>NGINX  </li>
</ul>
<hr />
<h2 id="setup-of-client-application-project">Setup of client application project</h2>
<h3 id="node">Node</h3>
<p>'create-React-app' is a script to install with 'npm' will pre-configure a 'webpack' environnement and give use access to a development server and a test server and a build command for production.</p>
<p>Role of 'NGINX' (http server) is to treat all http(s) request and return response from 'React' application to requester.</p>
<p>In this chapter we will see two new features:  </p>
<ul>
<li>Dockerfile multi staging, defined with many 'from'.  </li>
<li>Stdin_open and TTY, two new options of Docker Compose.  </li>
</ul>
<p>Prerequisite, install on host machine:  </p>
<ul>
<li>'nvm' - <a href="https://github.com/nvm-sh/nvm">Node Version Manager</a>  </li>
<li>'Node.js'</li>
</ul>
<p>Set/check installation with:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a><span class="go">// Setup project root folder</span>
<a id="__codelineno-0-2" name="__codelineno-0-2"></a><span class="go">mkdir react-nginx</span>
<a id="__codelineno-0-3" name="__codelineno-0-3"></a><span class="go">cd react-nginx</span>
<a id="__codelineno-0-4" name="__codelineno-0-4"></a>
<a id="__codelineno-0-5" name="__codelineno-0-5"></a><span class="go">// To install &#39;nvm&#39;</span>
<a id="__codelineno-0-6" name="__codelineno-0-6"></a><span class="go">curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.1/install.sh | bash</span>
<a id="__codelineno-0-7" name="__codelineno-0-7"></a>
<a id="__codelineno-0-8" name="__codelineno-0-8"></a><span class="go">// Check</span>
<a id="__codelineno-0-9" name="__codelineno-0-9"></a><span class="go">nvm</span>
<a id="__codelineno-0-10" name="__codelineno-0-10"></a>
<a id="__codelineno-0-11" name="__codelineno-0-11"></a><span class="go">// Get last version</span>
<a id="__codelineno-0-12" name="__codelineno-0-12"></a><span class="go">nvm ls-remote | tail</span>
<a id="__codelineno-0-13" name="__codelineno-0-13"></a><span class="go">.</span>
<a id="__codelineno-0-14" name="__codelineno-0-14"></a><span class="go">.</span>
<a id="__codelineno-0-15" name="__codelineno-0-15"></a><span class="go">v17.0.1</span>
<a id="__codelineno-0-16" name="__codelineno-0-16"></a><span class="go">        v17.1.0</span>
<a id="__codelineno-0-17" name="__codelineno-0-17"></a><span class="go">        v17.2.0</span>
<a id="__codelineno-0-18" name="__codelineno-0-18"></a><span class="go">        v17.3.0</span>
<a id="__codelineno-0-19" name="__codelineno-0-19"></a>
<a id="__codelineno-0-20" name="__codelineno-0-20"></a><span class="go">// Install last version</span>
<a id="__codelineno-0-21" name="__codelineno-0-21"></a><span class="go">nvm install 17.3.0</span>
<a id="__codelineno-0-22" name="__codelineno-0-22"></a>
<a id="__codelineno-0-23" name="__codelineno-0-23"></a><span class="go">node -v</span>
<a id="__codelineno-0-24" name="__codelineno-0-24"></a><span class="go">v17.3.0</span>
<a id="__codelineno-0-25" name="__codelineno-0-25"></a>
<a id="__codelineno-0-26" name="__codelineno-0-26"></a><span class="go">node</span>
<a id="__codelineno-0-27" name="__codelineno-0-27"></a><span class="go">Welcome to Node.js v17.3.0.       </span>
<a id="__codelineno-0-28" name="__codelineno-0-28"></a><span class="go">Type &quot;.help&quot; for more information.</span>
<a id="__codelineno-0-29" name="__codelineno-0-29"></a><span class="go">&gt;</span>
<a id="__codelineno-0-30" name="__codelineno-0-30"></a><span class="gp gp-VirtualEnv">(To exit, press Ctrl+C again or Ctrl+D or type .exit)</span>
<a id="__codelineno-0-31" name="__codelineno-0-31"></a><span class="go">&gt;</span>
</code></pre></div>
<h3 id="react">React</h3>
<p>Instal 'React' with 'npx' (like npm but executed once with last script release):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="go">npx create-react-app client</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="go">cd client</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="go">ls</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="go">README.md  node_modules  package-lock.json  package.json  public  src</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="go">npm start</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="go">.</span>
<a id="__codelineno-1-7" name="__codelineno-1-7"></a><span class="go">.</span>
<a id="__codelineno-1-8" name="__codelineno-1-8"></a><span class="go">Compiled successfully!</span>
<a id="__codelineno-1-9" name="__codelineno-1-9"></a>
<a id="__codelineno-1-10" name="__codelineno-1-10"></a><span class="go">You can now view client in the browser.</span>
<a id="__codelineno-1-11" name="__codelineno-1-11"></a>
<a id="__codelineno-1-12" name="__codelineno-1-12"></a><span class="go">  Local:            http://localhost:3000</span>
</code></pre></div>
<p>Browse to: - <a href="http://localhost:3000">http://localhost:3000</a></p>
<p>Test (launch tests contained in react-nginx/client/src/App.test.js):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="go">npm run test</span>
</code></pre></div>
<p>!! Fail on WSL2 :(</p>
<p>Build for production (add a build folder to the project, this is the folder to return via NGINX for client):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="go">npm run build</span>
</code></pre></div>
<p>All of this just to initialize the project locally on host machine.</p>
<h3 id="dockerized">Dockerized</h3>
<p>We may now <strong>delete the 'node_modules' folder</strong> ('node_modules' folder will then be only in container initialized with dependencies through 'npm install' command in 'Dockerfile'):</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="go">rm -rf node_modules/</span>
</code></pre></div>
<p>Add a 'Dockerfile' in client project folder '/home/user/react-nginx/client':</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="go">touch Dockerfile</span>
</code></pre></div>
<p>Dockerfile:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a>FROM node:alpine
<a id="__codelineno-6-2" name="__codelineno-6-2"></a>WORKDIR /app
<a id="__codelineno-6-3" name="__codelineno-6-3"></a>COPY package.json .
<a id="__codelineno-6-4" name="__codelineno-6-4"></a>RUN npm install
<a id="__codelineno-6-5" name="__codelineno-6-5"></a>COPY . .
<a id="__codelineno-6-6" name="__codelineno-6-6"></a>CMD [&quot;npm&quot;, &quot;start&quot;]
</code></pre></div>
<p>Build docker image:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="go">docker build -t myreact .</span>
<a id="__codelineno-7-2" name="__codelineno-7-2"></a>
<a id="__codelineno-7-3" name="__codelineno-7-3"></a><span class="go">docker image ls</span>
<a id="__codelineno-7-4" name="__codelineno-7-4"></a><span class="go">REPOSITORY                        TAG       IMAGE ID       CREATED          SIZE  </span>
<a id="__codelineno-7-5" name="__codelineno-7-5"></a><span class="go">myreact                           latest    c4c1b5bb9d21   45 seconds ago   483MB</span>
<a id="__codelineno-7-6" name="__codelineno-7-6"></a>
<a id="__codelineno-7-7" name="__codelineno-7-7"></a><span class="go">docker run --rm --name react -p 3000:3000 myreact</span>
</code></pre></div>
<p>Browse to: - <a href="http://localhost:3000">http://localhost:3000</a></p>
<hr />
<h2 id="live-reload">Live reload</h2>
<p>It's important to launch <strong>from a terminal</strong> a based VS Code instance from root client application folder to get live reload effect that works:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="go">cd .../react-nginx/client</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="go">code .</span>
</code></pre></div>
<p>For development purpose, to automatically propagate local changes to container.</p>
<p>Bind mount project folder:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="go">docker run --rm --name react -p 3000:3000 --mount type=bind,src=&quot;$(pwd)&quot;,target=/app myreact</span>
</code></pre></div>
<p>!! =&gt; FAIL!! Why? Because when bind mount it crush all what was contained in container '/app' folder with local content and in local there isn't anymore 'node_modules' folder.</p>
<p>To avoid this unwanted behavior and keep 'node_modules' in container folder not erased by bind mount (also needed for live reload feature), we bind an anonymous volume targeted on remote container '/app/node_modules' folder.</p>
<p>Also, to avoid 'EACCES: permission denied' issue on '/app/node_modules/.cache' folder we modify 'Dockerfile' as follow:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a>FROM node:alpine
<a id="__codelineno-10-2" name="__codelineno-10-2"></a>WORKDIR /app
<a id="__codelineno-10-3" name="__codelineno-10-3"></a>COPY package.json .
<a id="__codelineno-10-4" name="__codelineno-10-4"></a>RUN npm install
<a id="__codelineno-10-5" name="__codelineno-10-5"></a># To avoid &#39;EACCES: permission denied&#39; issue on &#39;/app/node_modules/.cache&#39; folder
<a id="__codelineno-10-6" name="__codelineno-10-6"></a>RUN mkdir -p node_modules/.cache &amp;&amp; chmod -R 777 node_modules/.cache
<a id="__codelineno-10-7" name="__codelineno-10-7"></a>COPY . .
<a id="__codelineno-10-8" name="__codelineno-10-8"></a>CMD [&quot;npm&quot;, &quot;start&quot;]
</code></pre></div>
<p>Bind mount project folder + anonymous volume with '/app/node_modules' as target:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="go">docker run --rm --name react -p 3000:3000 --mount type=bind,src=&quot;$(pwd)&quot;,target=/app --mount type=volume,target=/app/node_modules myreact</span>
</code></pre></div>
<p>It's advised to run with '--rm' option when using anonymous volume to suppress it automatically on stop in addition to container suppression.</p>
<p>Test live reload by changing text '.. save to reload.' with e.g. 'Hello, world!" in 'src/App.js' and then observe live effect at <a href="http://localhost:3000">http://localhost:3000</a> in an Internet browser.</p>
<hr />
<h2 id="set-up-docker-compose">Set up Docker Compose</h2>
<p>docker-compose.yml</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="nt">version</span><span class="p">:</span> <span class="s">&quot;3.8&quot;</span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="nt">services</span><span class="p">:</span>
<a id="__codelineno-12-3" name="__codelineno-12-3"></a>  <span class="nt">client</span><span class="p">:</span>
<a id="__codelineno-12-4" name="__codelineno-12-4"></a>    <span class="nt">build</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.</span>
<a id="__codelineno-12-5" name="__codelineno-12-5"></a>    <span class="nt">ports</span><span class="p">:</span>
<a id="__codelineno-12-6" name="__codelineno-12-6"></a>      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">3000:3000</span>
<a id="__codelineno-12-7" name="__codelineno-12-7"></a>    <span class="nt">volumes</span><span class="p">:</span>
<a id="__codelineno-12-8" name="__codelineno-12-8"></a>      <span class="p p-Indicator">-</span> <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">bind</span>
<a id="__codelineno-12-9" name="__codelineno-12-9"></a>        <span class="nt">source</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.</span>
<a id="__codelineno-12-10" name="__codelineno-12-10"></a>        <span class="nt">target</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/app</span>
<a id="__codelineno-12-11" name="__codelineno-12-11"></a>      <span class="p p-Indicator">-</span> <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">volume</span>
<a id="__codelineno-12-12" name="__codelineno-12-12"></a>        <span class="nt">target</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/app/node_modules</span>
</code></pre></div>
<p>Reset Docker:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="go">docker system prune -a</span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="go">docker volume prune</span>
</code></pre></div>
<p>Start service:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="go">docker-compose up</span>
</code></pre></div>
<p>You may observe live reload working by changing 'App.js' content and 'localhost:3000' changing accordingly.</p>
<hr />
<h2 id="test-during-developpement">Test during developpement</h2>
<p>Note:</p>
<ul>
<li><a href="https://webpack.js.org/">webpack</a> is an open-source JavaScript module bundler (wikipedia).  </li>
<li>TDD (Test Driven Development).</li>
</ul>
<p>In a devellopement process it's mostly advised to continuously test in order to check that we don't brake anything.<br />
To achieve this, we lauch two terminals in prallel, one with webpack for running application and this other one for automatic testing purpose.<br />
It's done with same container image and duplicate services in Docker Compose configuration file, only thing that will change for second duplicated service is that we override command from Dockerfile in Docker Compose configuration file to launch test server and remove also port mapping which is useless for tests.</p>
<p>docker-compose.yml:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="nt">version</span><span class="p">:</span> <span class="s">&quot;3.8&quot;</span>
<a id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="nt">services</span><span class="p">:</span>
<a id="__codelineno-15-3" name="__codelineno-15-3"></a>  <span class="nt">client</span><span class="p">:</span>
<a id="__codelineno-15-4" name="__codelineno-15-4"></a>    <span class="nt">build</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.</span>
<a id="__codelineno-15-5" name="__codelineno-15-5"></a>    <span class="nt">ports</span><span class="p">:</span>
<a id="__codelineno-15-6" name="__codelineno-15-6"></a>      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">3000:3000</span>
<a id="__codelineno-15-7" name="__codelineno-15-7"></a>    <span class="nt">volumes</span><span class="p">:</span>
<a id="__codelineno-15-8" name="__codelineno-15-8"></a>      <span class="p p-Indicator">-</span> <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">bind</span>
<a id="__codelineno-15-9" name="__codelineno-15-9"></a>        <span class="nt">source</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.</span>
<a id="__codelineno-15-10" name="__codelineno-15-10"></a>        <span class="nt">target</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/app</span>
<a id="__codelineno-15-11" name="__codelineno-15-11"></a>      <span class="p p-Indicator">-</span> <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">volume</span>
<a id="__codelineno-15-12" name="__codelineno-15-12"></a>        <span class="nt">target</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/app/node_modules</span>
<a id="__codelineno-15-13" name="__codelineno-15-13"></a>  <span class="nt">test</span><span class="p">:</span>
<a id="__codelineno-15-14" name="__codelineno-15-14"></a>    <span class="nt">build</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.</span>
<a id="__codelineno-15-15" name="__codelineno-15-15"></a>    <span class="nt">command</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="s">&quot;npm&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;run&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;test&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-15-16" name="__codelineno-15-16"></a>    <span class="nt">volumes</span><span class="p">:</span>
<a id="__codelineno-15-17" name="__codelineno-15-17"></a>      <span class="p p-Indicator">-</span> <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">bind</span>
<a id="__codelineno-15-18" name="__codelineno-15-18"></a>        <span class="nt">source</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.</span>
<a id="__codelineno-15-19" name="__codelineno-15-19"></a>        <span class="nt">target</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/app</span>
<a id="__codelineno-15-20" name="__codelineno-15-20"></a>      <span class="p p-Indicator">-</span> <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">volume</span>
<a id="__codelineno-15-21" name="__codelineno-15-21"></a>        <span class="nt">target</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/app/node_modules</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="go">docker-compose up --build</span>
</code></pre></div>
<p>In logs we may observe:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="go">.</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="go">.</span>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="go">test_1    | Tests:       1 passed, 1 total</span>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="go">.</span>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a><span class="go">.</span>
</code></pre></div>
<p>If we duplicate one exsisting test in '.../src/App.test.js' file, we may observe live change in logs:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="go">.</span>
<a id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="go">.</span>
<a id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="go">test_1    | Tests:       2 passed, 2 total</span>
<a id="__codelineno-18-4" name="__codelineno-18-4"></a><span class="go">.</span>
<a id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="go">.</span>
</code></pre></div>
<p>To interact with test server we need a second terminal.<br />
If we want to send command in test container when attaching to it we need to add two options to the test service in Docker Compose configuration file, 'stdin_open' and 'tty', both set to 'true'.</p>
<p>docker-compose.yml:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="nt">version</span><span class="p">:</span> <span class="s">&quot;3.8&quot;</span>
<a id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="nt">services</span><span class="p">:</span>
<a id="__codelineno-19-3" name="__codelineno-19-3"></a>  <span class="nt">client</span><span class="p">:</span>
<a id="__codelineno-19-4" name="__codelineno-19-4"></a>    <span class="nt">build</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.</span>
<a id="__codelineno-19-5" name="__codelineno-19-5"></a>    <span class="nt">ports</span><span class="p">:</span>
<a id="__codelineno-19-6" name="__codelineno-19-6"></a>      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">3000:3000</span>
<a id="__codelineno-19-7" name="__codelineno-19-7"></a>    <span class="nt">volumes</span><span class="p">:</span>
<a id="__codelineno-19-8" name="__codelineno-19-8"></a>      <span class="p p-Indicator">-</span> <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">bind</span>
<a id="__codelineno-19-9" name="__codelineno-19-9"></a>        <span class="nt">source</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.</span>
<a id="__codelineno-19-10" name="__codelineno-19-10"></a>        <span class="nt">target</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/app</span>
<a id="__codelineno-19-11" name="__codelineno-19-11"></a>      <span class="p p-Indicator">-</span> <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">volume</span>
<a id="__codelineno-19-12" name="__codelineno-19-12"></a>        <span class="nt">target</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/app/node_modules</span>
<a id="__codelineno-19-13" name="__codelineno-19-13"></a>  <span class="nt">test</span><span class="p">:</span>
<a id="__codelineno-19-14" name="__codelineno-19-14"></a>    <span class="nt">build</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.</span>
<a id="__codelineno-19-15" name="__codelineno-19-15"></a>    <span class="nt">command</span><span class="p">:</span> <span class="p p-Indicator">[</span><span class="s">&quot;npm&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;run&quot;</span><span class="p p-Indicator">,</span> <span class="s">&quot;test&quot;</span><span class="p p-Indicator">]</span>
<a id="__codelineno-19-16" name="__codelineno-19-16"></a>    <span class="nt">volumes</span><span class="p">:</span>
<a id="__codelineno-19-17" name="__codelineno-19-17"></a>      <span class="p p-Indicator">-</span> <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">bind</span>
<a id="__codelineno-19-18" name="__codelineno-19-18"></a>        <span class="nt">source</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.</span>
<a id="__codelineno-19-19" name="__codelineno-19-19"></a>        <span class="nt">target</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/app</span>
<a id="__codelineno-19-20" name="__codelineno-19-20"></a>      <span class="p p-Indicator">-</span> <span class="nt">type</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">volume</span>
<a id="__codelineno-19-21" name="__codelineno-19-21"></a>        <span class="nt">target</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">/app/node_modules</span>
<a id="__codelineno-19-22" name="__codelineno-19-22"></a>    <span class="nt">stdin_open</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-19-23" name="__codelineno-19-23"></a>    <span class="nt">tty</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">true</span>
</code></pre></div>
<p>In first terminal:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="go">docker-compose down -v</span>
<a id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="go">docker-compose up --build</span>
</code></pre></div>
<p>In second terminal:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="go">docker container ls</span>
<a id="__codelineno-21-2" name="__codelineno-21-2"></a>
<a id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="go">CONTAINER ID   IMAGE           COMMAND                  CREATED              STATUS              PORTS                    NAMES</span>
<a id="__codelineno-21-4" name="__codelineno-21-4"></a><span class="go">ca16b44236ad   client_test     &quot;docker-entrypoint.s&quot;   About a minute ago   Up About a minute                            client_test_1</span>
<a id="__codelineno-21-5" name="__codelineno-21-5"></a><span class="go">4633b0999f9c   client_client   &quot;docker-entrypoint.s&quot;   About a minute ago   Up About a minute   0.0.0.0:3000-&gt;3000/tcp   client_client_1</span>
<a id="__codelineno-21-6" name="__codelineno-21-6"></a>
<a id="__codelineno-21-7" name="__codelineno-21-7"></a><span class="go">docker attach client_test_1</span>
<a id="__codelineno-21-8" name="__codelineno-21-8"></a><span class="go">.</span>
<a id="__codelineno-21-9" name="__codelineno-21-9"></a><span class="go">.</span>
<a id="__codelineno-21-10" name="__codelineno-21-10"></a><span class="go">Watch Usage</span>
<a id="__codelineno-21-11" name="__codelineno-21-11"></a><span class="go">  Press f to run only failed tests.</span>
<a id="__codelineno-21-12" name="__codelineno-21-12"></a><span class="go">  Press o to only run tests related to changed files.</span>
<a id="__codelineno-21-13" name="__codelineno-21-13"></a><span class="go">  Press q to quit watch mode.</span>
<a id="__codelineno-21-14" name="__codelineno-21-14"></a><span class="go">  Press p to filter by a filename regex pattern.</span>
<a id="__codelineno-21-15" name="__codelineno-21-15"></a><span class="go">  Press t to filter by a test name regex pattern.</span>
<a id="__codelineno-21-16" name="__codelineno-21-16"></a><span class="go">  Press Enter to trigger a test run.</span>
</code></pre></div>
<p>We may now send commands to test server in second terminal.</p>
<p>Then, shutdown gracefully:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="go">docker-compose down -v</span>
</code></pre></div>
<hr />
<h2 id="production-environnement">Production environnement</h2>
<h3 id="introduction">Introduction</h3>
<p>NGINX return the build.</p>
<p>NGINX intercept http request and return by default an html file.</p>
<p>Browse <a href="https://hub.docker.com/_/nginx#:~:text=Hosting%20some%20simple%20static%20content">docker hub for nginx on official image page to host some simple static content</a>.</p>
<p>Simple test:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="go">docker run --rm -p 80:80 nginx</span>
</code></pre></div>
<p>Browse to <a href="http://localhost/">localhost</a></p>
<p>In a second terminal:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="go">docker exec -it exciting_elion sh</span>
<a id="__codelineno-24-2" name="__codelineno-24-2"></a>
<a id="__codelineno-24-3" name="__codelineno-24-3"></a><span class="go">cd usr/share/nginx/html</span>
<a id="__codelineno-24-4" name="__codelineno-24-4"></a>
<a id="__codelineno-24-5" name="__codelineno-24-5"></a><span class="go">ls</span>
<a id="__codelineno-24-6" name="__codelineno-24-6"></a><span class="go">50x.html  index.html</span>
<a id="__codelineno-24-7" name="__codelineno-24-7"></a>
<a id="__codelineno-24-8" name="__codelineno-24-8"></a><span class="go">cat index.html</span>
<a id="__codelineno-24-9" name="__codelineno-24-9"></a><span class="go">&lt;!DOCTYPE html&gt;</span>
<a id="__codelineno-24-10" name="__codelineno-24-10"></a><span class="go">&lt;html&gt;</span>
<a id="__codelineno-24-11" name="__codelineno-24-11"></a><span class="go">&lt;head&gt;</span>
<a id="__codelineno-24-12" name="__codelineno-24-12"></a><span class="go">&lt;title&gt;Welcome to nginx!&lt;/title&gt;</span>
<a id="__codelineno-24-13" name="__codelineno-24-13"></a><span class="go">.</span>
<a id="__codelineno-24-14" name="__codelineno-24-14"></a><span class="go">.</span>
</code></pre></div>
<p>It's in this folder we gonna copy our application '/usr/share/nginx/html'.</p>
<p>For more complex configuration, have a look in '/etc/nginx/conf.d' folder.</p>
<h3 id="multi-stage-dockerfile">Multi stage Dockerfile</h3>
<p>Reuse a preceding builded image in next build.</p>
<p>Goal to reach here is to put React's build folder into NGINX image.</p>
<p>../client/Dockerfile.prod</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1"></a>FROM node:alpine as buildstage
<a id="__codelineno-25-2" name="__codelineno-25-2"></a>WORKDIR /app
<a id="__codelineno-25-3" name="__codelineno-25-3"></a>COPY package.json .
<a id="__codelineno-25-4" name="__codelineno-25-4"></a>RUN npm install
<a id="__codelineno-25-5" name="__codelineno-25-5"></a>COPY . .
<a id="__codelineno-25-6" name="__codelineno-25-6"></a>RUN npm run build
<a id="__codelineno-25-7" name="__codelineno-25-7"></a>
<a id="__codelineno-25-8" name="__codelineno-25-8"></a>FROM nginx
<a id="__codelineno-25-9" name="__codelineno-25-9"></a>COPY --from=buildstage /app/build /usr/share/nginx/html
<a id="__codelineno-25-10" name="__codelineno-25-10"></a>EXPOSE 80
</code></pre></div>
<p>After second FROM above, --from=buildstage refer to first stage of image build (npm run build, output is a 'build' folder that containe production application).</p>
<p>Build Docker image:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1"></a><span class="go">docker build -t nginxreact -f Dockerfile.prod .</span>
<a id="__codelineno-26-2" name="__codelineno-26-2"></a><span class="go">.</span>
<a id="__codelineno-26-3" name="__codelineno-26-3"></a><span class="go">.</span>
<a id="__codelineno-26-4" name="__codelineno-26-4"></a><span class="go"> =&gt; [stage-1 2/2] COPY --from=buildstage /app/build /usr/share/nginx/html</span>
<a id="__codelineno-26-5" name="__codelineno-26-5"></a><span class="go">.</span>
<a id="__codelineno-26-6" name="__codelineno-26-6"></a><span class="go">.</span>
<a id="__codelineno-26-7" name="__codelineno-26-7"></a>
<a id="__codelineno-26-8" name="__codelineno-26-8"></a><span class="go">docker image ls</span>
<a id="__codelineno-26-9" name="__codelineno-26-9"></a><span class="go">REPOSITORY      TAG       IMAGE ID       CREATED         SIZE</span>
<a id="__codelineno-26-10" name="__codelineno-26-10"></a><span class="go">nginxreact      latest    ee3388384541   4 minutes ago   141MB</span>
<a id="__codelineno-26-11" name="__codelineno-26-11"></a><span class="go">.</span>
<a id="__codelineno-26-12" name="__codelineno-26-12"></a><span class="go">.</span>
<a id="__codelineno-26-13" name="__codelineno-26-13"></a><span class="go">&lt;none&gt;          &lt;none&gt;    1c9dc1e2c948   6 hours ago     483MB</span>
<a id="__codelineno-26-14" name="__codelineno-26-14"></a><span class="go">.</span>
<a id="__codelineno-26-15" name="__codelineno-26-15"></a><span class="go">.</span>
</code></pre></div>
<p>"\&lt;none>" image are produced by intermediate build stage(s).</p>
<p>Launch a container with just built image:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1"></a><span class="go">docker run --rm -p 80:80 nginxreact</span>
</code></pre></div>
<p>Browse to <a href="http://localhost/">localhost</a> to observe your production application running.</p>
<h3 id="docker-compose">Docker Compose</h3>
<p>A new Docker Compose configuration file dedicated to prodction:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1"></a><span class="go">touch docker-compose.prod.yml</span>
</code></pre></div>
<p>docker-compose.prod.yml</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1"></a><span class="nt">version</span><span class="p">:</span> <span class="s">&quot;3.8&quot;</span>
<a id="__codelineno-29-2" name="__codelineno-29-2"></a><span class="nt">services</span><span class="p">:</span>
<a id="__codelineno-29-3" name="__codelineno-29-3"></a>  <span class="nt">mynginx</span><span class="p">:</span>
<a id="__codelineno-29-4" name="__codelineno-29-4"></a>    <span class="nt">build</span><span class="p">:</span>
<a id="__codelineno-29-5" name="__codelineno-29-5"></a>      <span class="nt">context</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">.</span>
<a id="__codelineno-29-6" name="__codelineno-29-6"></a>      <span class="nt">dockerfile</span><span class="p">:</span> <span class="l l-Scalar l-Scalar-Plain">Dockerfile.prod</span>
<a id="__codelineno-29-7" name="__codelineno-29-7"></a>    <span class="nt">ports</span><span class="p">:</span>
<a id="__codelineno-29-8" name="__codelineno-29-8"></a>      <span class="p p-Indicator">-</span> <span class="l l-Scalar l-Scalar-Plain">80:80</span>
</code></pre></div>
<p>Reset Docker content:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1"></a><span class="go">docker system prune -a</span>
<a id="__codelineno-30-2" name="__codelineno-30-2"></a><span class="go">docker volume prune</span>
</code></pre></div>
<p>Start a fresh new production application:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1"></a><span class="go">docker-compose -f docker-compose.prod.yml up</span>
</code></pre></div>
<p>Browse to <a href="http://localhost/">localhost</a> to observe your production application running.</p>
<hr />

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../8-compose-use/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Compose - 08 - Use" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Compose - 08 - Use
            </div>
          </div>
        </a>
      
      
        
        <a href="../10-compose-services/" class="md-footer__link md-footer__link--next" aria-label="Next: Compose - 10 - Services" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Compose - 10 - Services
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["content.code.annotate"], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../../assets/javascripts/workers/search.01824240.min.js"}</script>
    
    
      <script src="../../assets/javascripts/bundle.e0abf5b0.min.js"></script>
      
    
  </body>
</html>